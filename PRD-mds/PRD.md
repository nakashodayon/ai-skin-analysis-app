# プロジェクト概要
Google Gemini AIを活用した高度な肌質経過分析アプリケーションです。
顔写真や顔を360度撮影した動画ファイルを元にGeminiを使用して肌質分析を実装するアプリを作成します。

# 主要機能

## 1. 複数時点での肌質分析
- 異なる時期の顔画像をアップロード可能
- 各時点にラベル（例：「2024年1月開始時」「3ヶ月後」）を設定
- 複数の分析ポイントを同時に管理

## 2. AI肌質分析（個別分析）
Google Gemini AIによる詳細な肌質評価：
- **肌年齢推定**: 画像から推定される肌年齢と所見
- **ハリ（弾力）**: 肌のハリと弾力性の評価
- **毛穴（なめらかさ）**: 毛穴の状態と肌のなめらかさ
- **キメ**: 肌のキメの細やかさと均一性
- **シミ**: シミの種類、分布、程度の分析
- **シワ**: シワの種類と深さの評価
- **赤み**: 肌の赤みや炎症の状態
- **重要事項**: 特に注意すべき肌の状態

## 3. 輪郭分析
顔の形状と構造の詳細分析：
- **主要寸法測定**:
  - 顔全体の縦の長さ（髪の生え際～顎先）
  - 顔全体の横の最大幅
  - 額の幅（こめかみ間）
  - 頬骨の幅
  - エラの幅
  - 顎先の幅
- **顔タイプ推定**: 顔の形状分類と根拠
- **左右対称性**: 顔の対称性に関する所見

## 4. 総合経過分析レポート
複数時点のデータを統合した包括的な分析：
- **概要**: 全体的な変化の要約
- **改善点**: 観察された肌の改善
- **要注意点または悪化点**: 注意が必要な変化
- **観察された主な傾向**: 時系列での変化パターン
- **推奨事項**: 今後のスキンケアアドバイス

## 5. 高速開発環境（Vite）
Viteによる最適化された開発・ビルド環境：
- **高速開発サーバー**: ホットリロードとインスタントフィードバック
- **最適化ビルド**: 本番環境向けの軽量化されたバンドル
- **TypeScript完全対応**: 型安全性とIntelliSense機能
- **プラグインエコシステム**: React、PostCSS等の統合サポート

# Doc(md)

## README.md
プロジェクトの基本的な実行方法とセットアップ手順を記載
- ローカル実行のためのNode.js要件
- 依存関係のインストール手順 (`npm install`)
- 環境変数設定 (GEMINI_API_KEY)
- 開発サーバー起動コマンド (`npm run dev`)

## PRD.md
このドキュメント。プロジェクトの要求仕様を詳細に記載
- プロジェクト概要と目的
- 主要機能の詳細仕様
- ドキュメント構成の説明
- ファイル構造の可視化

# 現在のファイル構造(branch式で)

```
ai肌分析アプリbeta/
├── .git/                    # Gitバージョン管理
├── .cursor/                 # Cursor IDE設定
├── .vercel/                 # Vercelデプロイ設定
├── PRD-mds/                 # プロジェクト要求仕様
│   └── PRD.md              # メインPRD文書
├── components/             # Reactコンポーネント
│   ├── AnalysisReport.tsx  # 個別分析結果表示 (115行)
│   ├── FileUpload.tsx      # 画像アップロード機能 (164行)
│   ├── LoadingSpinner.tsx  # ローディング表示 (16行)
│   ├── OverallAnalysisReport.tsx # 総合レポート表示 (52行)
│   └── SectionCard.tsx     # UIセクションカード (21行)
├── services/               # APIサービス
│   └── geminiService.ts    # Gemini AI API通信 (136行)
├── .gitignore              # Git除外設定 (27行)
├── App.tsx                 # メインアプリケーション (341行)
├── constants.ts            # 定数定義 (116行)
├── index.html              # HTMLエントリーポイント (46行)
├── index.tsx               # Reactエントリーポイント (16行)
├── metadata.json           # プロジェクトメタデータ (6行)
├── package.json            # npm依存関係 (22行)
├── README.md               # セットアップ手順 (15行)
├── tsconfig.json           # TypeScript設定 (31行)
├── types.ts                # 型定義 (93行)
└── vite.config.ts          # Vite設定 (18行)
```

# 新規追加要求

## 1. データ永続化機能
- **ローカルストレージ保存**: ブラウザ再読み込み後もデータ保持
- **JSONエクスポート**: 分析結果のダウンロード機能
- **データインポート**: 以前の分析データの読み込み

## 3. データベース統合
- **Supabase導入**: データ永続化とクラウド保存

## 4. 認証機能
- **Clerk認証**: ユーザー管理と認証システム

# 実装ステップ

## 3. Auth
- **Clerk設定**: プロバイダー設定とルーティング保護
- **ログイン・サインアップUI**: 認証フォームの実装
- **ユーザープロフィール**: アカウント管理画面
- **アクセス制御**: 認証状態に基づく機能制限

## 4. Backend(Supabase)
- **データベース設計**: テーブル構造とリレーション定義
- **API統合**: CRUD操作とリアルタイム同期
- **ファイルストレージ**: 画像アップロードとURLゲネレーション
- **データ移行**: 既存ローカルデータのクラウド移行

# デプロイ・本番環境

## 環境変数管理
本番環境で必要な環境変数：
```
GEMINI_API_KEY=your_gemini_api_key
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_SECRET_KEY=your_clerk_secret_key
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## ビルド・デプロイフロー
1. **開発**: `npm run dev` でローカル開発サーバー起動
2. **ビルド**: `npm run build` で本番用ビルド生成
3. **プレビュー**: `npm run preview` でビルド結果の確認
4. **デプロイ**: Vercel CLIまたはGit連携による自動デプロイ

## 本番環境要件
- **Node.js**: v18以上
- **ブラウザ対応**: Chrome、Firefox、Safari、Edge（最新2バージョン）
- **パフォーマンス**: Lighthouse スコア 90以上
- **セキュリティ**: HTTPS通信、API キー適切な管理